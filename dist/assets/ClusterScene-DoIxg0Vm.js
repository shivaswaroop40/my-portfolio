import{j as t,g as z}from"./animation-B41GRv3l.js";import{a as x}from"./vendor-C9BRS2fo.js";import{u as S,C as m,T as M,H as A,V as I,a as R,A as F,b as E,O as k,S as G}from"./three-ehFBsLbG.js";import{g as B}from"./K8sPortfolio-sGoAR5AW.js";import"./resume-DN1D2eGd.js";import"./index-BmCPZmW6.js";import"./analytics-gya1aJBg.js";function D({pod:e,position:l,namespaceColor:h,onClick:f}){const a=x.useRef(null),d=x.useRef(null),[s,n]=x.useState(!1),r=B(e.status);return S(o=>{if(a.current){a.current.rotation.y+=.003;const i=s?1.3:1;a.current.scale.lerp(new I(i,i,i),.1)}if(d.current&&e.status==="Running"){const i=Math.sin(o.clock.elapsedTime*2)*.3+.7;d.current.material.emissiveIntensity=i}}),t.jsxs("group",{position:l,children:[t.jsxs("mesh",{ref:a,onClick:o=>{o.stopPropagation(),f()},onPointerEnter:()=>{n(!0),document.body.style.cursor="pointer"},onPointerLeave:()=>{n(!1),document.body.style.cursor="default"},children:[t.jsx("cylinderGeometry",{args:[1.2,1.2,2,6]}),t.jsx("meshStandardMaterial",{color:r,transparent:!0,opacity:.8,emissive:new m(r),emissiveIntensity:.4,metalness:.3,roughness:.7})]}),t.jsxs("mesh",{ref:d,rotation:[Math.PI/2,0,0],position:[0,0,0],children:[t.jsx("torusGeometry",{args:[1.5,.05,8,6]}),t.jsx("meshStandardMaterial",{color:r,emissive:new m(r),emissiveIntensity:.6,transparent:!0,opacity:.6})]}),t.jsx(M,{position:[0,2.2,0],fontSize:.45,color:"white",anchorX:"center",anchorY:"middle",maxWidth:5,font:void 0,outlineWidth:.02,outlineColor:"#000000",children:e.label}),t.jsxs("mesh",{position:[0,-1.5,0],children:[t.jsx("sphereGeometry",{args:[.15,8,8]}),t.jsx("meshStandardMaterial",{color:r,emissive:new m(r),emissiveIntensity:1})]}),s&&t.jsx(A,{position:[0,3.5,0],center:!0,style:{pointerEvents:"none"},children:t.jsxs("div",{className:"px-4 py-3 rounded-xl text-center whitespace-nowrap",style:{background:"rgba(10, 14, 39, 0.95)",border:`1px solid ${h}40`,backdropFilter:"blur(10px)",boxShadow:`0 0 20px ${h}20`},children:[t.jsxs("p",{className:"text-xs font-mono mb-1",style:{color:r},children:["â— ",e.status]}),t.jsx("p",{className:"text-sm font-semibold text-white max-w-[200px] whitespace-normal",children:e.label}),e.techStack&&t.jsx("div",{className:"flex gap-1 mt-2 justify-center flex-wrap max-w-[200px]",children:e.techStack.slice(0,4).map(o=>t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:`${h}20`,color:h},children:o},o))})]})})]})}function L({namespace:e,isActive:l,onSelect:h,onPodSelect:f}){var C,P;const a=x.useRef(null),[d,s]=x.useState(!1),n=x.useRef(e.position.y);S(c=>{if(a.current){const j=Math.sin(c.clock.elapsedTime*.5+e.position.x*.1)*.5;a.current.position.y=n.current+j}});const r=new m(e.color),o=((C=e.deployments)==null?void 0:C.flatMap(c=>c.pods))||[],i=((P=e.configMaps)==null?void 0:P.flatMap(c=>c.data))||[],u=e.services||[],y=o.length+i.length+u.length,p=Math.max(8,y*1.5);return t.jsxs("group",{ref:a,position:[e.position.x,e.position.y,e.position.z],children:[t.jsxs("group",{onClick:c=>{c.stopPropagation(),h(e)},onPointerEnter:()=>{s(!0),document.body.style.cursor="pointer"},onPointerLeave:()=>{s(!1),document.body.style.cursor="default"},children:[t.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-1,0],children:[t.jsx("cylinderGeometry",{args:[p+2,p+3,.5,32]}),t.jsx("meshStandardMaterial",{color:r,transparent:!0,opacity:d||l?.25:.12,emissive:r,emissiveIntensity:d||l?.3:.1})]}),t.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.7,0],children:[t.jsx("torusGeometry",{args:[p+2.5,.1,8,64]}),t.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:d||l?1.5:.5,transparent:!0,opacity:.8})]}),t.jsx(M,{position:[0,5,0],fontSize:1.8,color:e.color,anchorX:"center",anchorY:"middle",font:void 0,outlineWidth:.05,outlineColor:"#000000",children:e.displayName}),t.jsx(M,{position:[0,3.5,0],fontSize:.8,color:"#94A3B8",anchorX:"center",anchorY:"middle",font:void 0,children:`namespace/${e.name}`})]}),o.map((c,j)=>{const b=j/Math.max(y,1)*Math.PI*2,g=Math.cos(b)*p,v=Math.sin(b)*p;return t.jsx(D,{pod:c,position:[g,0,v],namespaceColor:e.color,onClick:()=>f(c.id,e.id)},c.id)}),i.map((c,j)=>{const g=(o.length+j)/Math.max(y,1)*Math.PI*2,v=Math.cos(g)*p,w=Math.sin(g)*p;return t.jsxs("group",{position:[v,0,w],children:[t.jsx(R,{args:[2,1.5,.3],radius:.15,smoothness:4,children:t.jsx("meshStandardMaterial",{color:e.color,transparent:!0,opacity:.6,emissive:new m(e.color),emissiveIntensity:.3})}),t.jsx(M,{position:[0,0,.2],fontSize:.4,color:"white",anchorX:"center",anchorY:"middle",maxWidth:1.8,font:void 0,children:c})]},`config-${c}`)}),u.map((c,j)=>{const g=(o.length+i.length+j)/Math.max(y,1)*Math.PI*2,v=Math.cos(g)*(p*.7),w=Math.sin(g)*(p*.7);return t.jsxs("group",{position:[v,1,w],children:[t.jsxs("mesh",{children:[t.jsx("sphereGeometry",{args:[1,16,16]}),t.jsx("meshStandardMaterial",{color:e.color,transparent:!0,opacity:.4,emissive:new m(e.color),emissiveIntensity:.5})]}),t.jsx(M,{position:[0,1.8,0],fontSize:.5,color:"white",anchorX:"center",anchorY:"middle",maxWidth:6,font:void 0,children:c.name}),t.jsx(M,{position:[0,-1.5,0],fontSize:.35,color:"#94A3B8",anchorX:"center",anchorY:"middle",font:void 0,children:c.type})]},c.id)}),o.length>1&&t.jsx(W,{count:o.length,radius:p,totalItems:y,color:e.color})]})}function W({count:e,radius:l,totalItems:h,color:f}){const a=x.useRef(null);S(s=>{a.current&&a.current.children.forEach((n,r)=>{const o=n.material;o.opacity=.1+Math.sin(s.clock.elapsedTime*2+r)*.05})});const d=[];for(let s=0;s<e;s++)for(let n=s+1;n<e;n++){const r=s/h*Math.PI*2,o=n/h*Math.PI*2;d.push([new I(Math.cos(r)*l,0,Math.sin(r)*l),new I(Math.cos(o)*l,0,Math.sin(o)*l)])}return t.jsx("group",{ref:a,children:d.map((s,n)=>t.jsxs("line",{children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:2,array:new Float32Array([s[0].x,s[0].y,s[0].z,s[1].x,s[1].y,s[1].z]),itemSize:3})}),t.jsx("lineBasicMaterial",{color:f,transparent:!0,opacity:.15})]},n))})}function Y({count:e=500,spread:l=150}){const h=x.useRef(null),{positions:f,velocities:a,colors:d}=x.useMemo(()=>{const s=new Float32Array(e*3),n=new Float32Array(e*3),r=new Float32Array(e*3),o=[new m("#326CE5"),new m("#00D9C0"),new m("#8B5CF6"),new m("#5A8FFF"),new m("#10B981")];for(let i=0;i<e;i++){const u=i*3;s[u]=(Math.random()-.5)*l,s[u+1]=(Math.random()-.5)*l,s[u+2]=(Math.random()-.5)*l,n[u]=(Math.random()-.5)*.02,n[u+1]=(Math.random()-.5)*.02,n[u+2]=(Math.random()-.5)*.02;const y=o[Math.floor(Math.random()*o.length)];r[u]=y.r,r[u+1]=y.g,r[u+2]=y.b}return{positions:s,velocities:n,colors:r}},[e,l]);return S(()=>{if(!h.current)return;const s=h.current.geometry.attributes.position,n=s.array;for(let r=0;r<e;r++){const o=r*3;n[o]+=a[o],n[o+1]+=a[o+1],n[o+2]+=a[o+2];const i=l/2;n[o]>i&&(n[o]=-i),n[o]<-i&&(n[o]=i),n[o+1]>i&&(n[o+1]=-i),n[o+1]<-i&&(n[o+1]=i),n[o+2]>i&&(n[o+2]=-i),n[o+2]<-i&&(n[o+2]=i)}s.needsUpdate=!0}),t.jsxs("points",{ref:h,children:[t.jsxs("bufferGeometry",{children:[t.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:f,itemSize:3}),t.jsx("bufferAttribute",{attach:"attributes-color",count:e,array:d,itemSize:3})]}),t.jsx("pointsMaterial",{size:.3,transparent:!0,opacity:.6,vertexColors:!0,sizeAttenuation:!0,depthWrite:!1,blending:F})]})}function H({cluster:e,activeNamespace:l,onNamespaceSelect:h,onPodSelect:f}){const a=x.useRef(null),d=x.useCallback(s=>{if(!a.current)return;const n=a.current;z.to(n.target,{x:s.position.x,y:s.position.y,z:s.position.z,duration:1.5,ease:"power3.inOut"});const r=n.object;z.to(r.position,{x:s.position.x+20,y:s.position.y+25,z:s.position.z+30,duration:1.5,ease:"power3.inOut"}),h(s)},[h]);return t.jsxs(t.Fragment,{children:[t.jsx(k,{ref:a,enablePan:!0,enableZoom:!0,enableRotate:!0,maxDistance:200,minDistance:15,maxPolarAngle:Math.PI/2.1,autoRotate:!l,autoRotateSpeed:.3,dampingFactor:.05,enableDamping:!0}),t.jsx("ambientLight",{intensity:.3}),t.jsx("directionalLight",{position:[50,50,50],intensity:.8,color:"#ffffff"}),t.jsx("directionalLight",{position:[-30,20,-30],intensity:.3,color:"#326CE5"}),t.jsx("pointLight",{position:[0,30,0],intensity:.6,color:"#5A8FFF",distance:100}),t.jsx(G,{radius:300,depth:100,count:3e3,factor:4,saturation:0,fade:!0,speed:.5}),t.jsx("fog",{attach:"fog",args:["#0A0E27",80,250]}),t.jsxs("group",{position:[0,-3,0],children:[t.jsxs("mesh",{children:[t.jsx("sphereGeometry",{args:[3,32,32]}),t.jsx("meshStandardMaterial",{color:"#326CE5",emissive:"#326CE5",emissiveIntensity:.5,transparent:!0,opacity:.15})]}),t.jsxs("mesh",{rotation:[Math.PI/4,0,0],children:[t.jsx("torusGeometry",{args:[5,.08,8,64]}),t.jsx("meshStandardMaterial",{color:"#326CE5",emissive:"#326CE5",emissiveIntensity:1,transparent:!0,opacity:.4})]}),t.jsxs("mesh",{rotation:[-Math.PI/4,Math.PI/3,0],children:[t.jsx("torusGeometry",{args:[6,.06,8,64]}),t.jsx("meshStandardMaterial",{color:"#00D9C0",emissive:"#00D9C0",emissiveIntensity:.8,transparent:!0,opacity:.3})]})]}),e.namespaces.map(s=>t.jsx(L,{namespace:s,isActive:l===s.id,onSelect:d,onPodSelect:f},s.id)),t.jsx(Y,{count:400,spread:200}),t.jsx("gridHelper",{args:[200,40,"#1A4B9E","#151B3D"],position:[0,-15,0]})]})}function Z(e){return t.jsx(E,{camera:{position:[0,50,100],fov:60,near:.1,far:1e3},style:{background:"#0A0E27"},dpr:[1,2],gl:{antialias:!0,alpha:!1},children:t.jsx(x.Suspense,{fallback:null,children:t.jsx(H,{...e})})})}export{Z as default};
